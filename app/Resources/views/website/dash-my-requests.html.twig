{% extends 'base.html.twig' %}

{% block title %} My requests{% endblock %}

{% block body %}
    <div class="pad">
    </div>
    <div ng-controller="DashboardController">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-3">
                {% include 'website/sidemenu.html.twig' with {'customerId' : customer.customerid} %}
            </div>
            <div class="col-xs-12 col-md-8 col-md-offset-1 border-yellow no-padding">
                <div class="modal-header bg-yellow">
                    <h4 class="modal-title">{{ 'dash_services_request' | trans({}, "messages", lang)}}</h4>
                </div>
                <div class="row" ng-repeat="request in requests">
                    <div class="col-xs-12 ">
                        <div class="panel-group" id="myAccordion">

                                <div class="panel-heading bg-light-gray ">
                                    <h4 class="panel-title ">
                                        <a data-toggle="collapse" data-parent="#myAccordion" href="#collapsedashboard" ng-bind="request.requestDate + ' | ' + request.service + ' | ' + request.status"></a>
                                    </h4>
                                </div>

                                <div id="collapsedashboard" class="panel-collapse collapse in  ">
                                    <div class="panel-body"><label class="text-bold">{{ 'dash_req_date' | trans({}, "messages", lang)}} :</label> <text ng-bind="request.requestDate"></text> <br/>
                                        <!--<label class="text-bold">{{ 'dash_status' | trans({}, "messages", lang)}} :</label>{{ 'status_closed' | trans({}, "messages", lang)}}<br/>-->
                                        <label class="text-bold">{{ 'dash_status' | trans({}, "messages", lang)}} :</label><text ng-bind="request.status"></text><br/>
                                        <label class="text-bold">{{ 'dash_req_id' | trans({}, "messages", lang)}}</label> : <text ng-bind="request.requestId"></text>
                                    </div>

                                    <div class="panel-body" >{[request.details]}
                                    </div>

                                    <div class="col-xs-12 no-padding">
                                        <div class="table-responsive">
                                            <table class="table table-hover">

                                                <thead class="bg-light-gray">
                                                <tr>
                                                    <th>{{ 'dash_intervention' | trans({}, "messages", lang)}}</th>
                                                    <th>{{ 'dash_technician' | trans({}, "messages", lang)}}</th>
                                                    <th>{{ 'dash_comments' | trans({}, "messages", lang)}}</th>


                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr ng-repeat="intervention in request.interventions">

                                                    <td class="" ng-bind="intervention.interventionDate"></td>
                                                    <td class="" ng-bind="intervention.technician"></td>
                                                    <td class="" ng-bind="intervention.comments"></td>


                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>



                        </div>


                    </div>


                </div>






            </div>



        </div>
    </div>






 </div>



 <div class="pad">
 </div>
{% endblock %}