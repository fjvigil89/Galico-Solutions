{% extends 'base.html.twig' %}

{% block title %} Admin add Customers{% endblock %}

{% block body %}

    <div class="pad">
    </div>
    <div ng-controller="CustomerController" ng-cloak>
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-md-3">
                    {% include 'website/sidemenu-admin.html.twig' %}
                </div>
                <div class="col-xs-12 col-md-8 col-md-offset-1 border-yellow no-padding">

                    <div class="modal-header bg-yellow">

                        <h4 class="modal-title">{{ 'admin_add_customer' | trans({}, "messages", lang) }}</h4>
                    </div>
                    <div class="modal-body">
                        <form id="frm_newCustomer" method="POST" action="{{ path('rte_admin_customer_save') }}">
                        <div ng-if="step==1">

                            <p class="error-message text-center text-bold">{[ error.message ]}</p>

                                <h5 class="error-message text-bold text-center" ng-bind="auth.message" class=""></h5>

                                <div class="form-group">
                                    <label for="firstname">{{ 'form_name' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName"
                                           ng-model="newCustomer.firstName" value="">
                                </div>
                                <div class="form-group">
                                    <label for="lastname">{{ 'form_lastname' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName"
                                           ng-model="newCustomer.lastName" value="">
                                </div>

                                <div class="form-group">
                                    <label for="email">{{ 'form_email' | trans({}, "messages", lang) }}</label>
                                    <input type="email" class="form-control" ng-model="newCustomer.email" id="email"
                                           name="email" value="">
                                </div>
                                <div class="form-group">
                                    <label for="pwd">{{ 'form_password' | trans({}, "messages", lang) }}</label>
                                    <input type="password" class="form-control" ng-model="newCustomer.pwd" id="pwd"
                                           name="pwd" value="">
                                </div>
                                <div class="form-group">
                                    <label for="pwd">{{ 'modal_confirm_password' | trans({}, "messages", lang) }}</label>
                                    <input type="password" class="form-control" id="cPwd" name="cPwd"
                                           ng-model="newCustomer.cPwd" required>
                                </div>
                                <div class="form-group">
                                    <label for="phonePrimary">{{ 'form_phone_primary' | trans({}, "messages", lang) }}</label>
                                    <input type="tel" class="form-control" id="phonePrimary" name="phonePrimary"
                                           ng-model="newCustomer.phonePrimary" value="">
                                </div>
                                <div class="form-group">
                                    <label for="phonealternate">{{ 'form_phone_alternate' | trans({}, "messages", lang) }}</label>
                                    <input type="tel" class="form-control" id="phoneAlternate" name="phoneAlternate"
                                           ng-model="newCustomer.phoneAlternate" value="">
                                </div>
                                <div class="form-group">
                                    <label for="country">{{ 'form_Country' | trans({}, "messages", lang) }}</label>
                                    <select name="country" id="country" class="form-control"
                                            ng-model="newCustomer.country">

                                        <option value="Canada">Canada</option>
                                        <option value="Costa Rica">Costa Rica</option>
                                        <option value="Cuba">Cuba</option>
                                        <option value="Mexico">Mexico</option>
                                        <option value="United States">United States</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="state">{{ 'form_state' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="state" name="state"
                                           ng-model="newCustomer.state" value="">
                                </div>
                                <div class="form-group">
                                    <label for="city">{{ 'form_city' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="city" name="city"
                                           ng-model="newCustomer.city" value="">
                                </div>
                                <div class="form-group">
                                    <label for="address">{{ 'form_address' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="address" name="address"
                                           ng-model="newCustomer.address" value="">
                                </div>
                                <div class="form-group">
                                    <label for="zipCode">{{ 'form_zipcode' | trans({}, "messages", lang) }}</label>
                                    <input type="text" class="form-control" id="zipCode" name="zipCode"
                                           ng-model="newCustomer.zipCode" value="">
                                </div>




                        </div>


                        <div ng-if="step==2">
                            <div class="">

                                <h4 class="modal-title text-center">{{ 'dash_add_house' | trans({}, "messages", lang) }}</h4>
                            </div>
                            <h5 class="error-message text-bold text-center">{[error.message]} </h5>


                            <div class="form-group">
                                <label for="contactFirstName">{{ 'dash_contact_firtName' | trans({}, "messages", lang) }}
                                    * :</label>
                                <input type="text" class="form-control" id="contactFirstName"
                                       ng-model="newHouse.contactFirstName">
                            </div>

                            <div class="form-group">
                                <label for="contactLastName">{{ 'dash_contact_lastName' | trans({}, "messages", lang) }}
                                    * :</label>
                                <input type="text" class="form-control" id="contactLastName"
                                       ng-model="newHouse.contactLastName">
                            </div>

                            <div class="form-group">
                                <label for="contactPhonePrimary">{{ 'form_phone_primary' | trans({}, "messages", lang) }}
                                    *:</label>
                                <input type="tel" class="form-control" id="contactPhonePrimary"
                                       ng-model="newHouse.contactPhonePrimary">
                            </div>
                            <div class="form-group">
                                <label for="contactPhoneAlternate">{{ 'form_phone_alternate' | trans({}, "messages", lang) }}
                                    :</label>
                                <input type="tel" class="form-control" id="contactPhoneAlternate"
                                       ng-model="newHouse.contactPhoneAlternate">
                            </div>
                            <div class="form-group">
                                <label for="houseCountry">{{ 'form_Country' | trans({}, "messages", lang) }}*</label>
                                <select name="country" id="houseCountry" class="form-control"
                                        ng-model="newHouse.country">
                                    <!-- {|% for country in countries #%}
                                         <option value="{|{ country.country }}">{|{ country.country }}</option>
                                     {|% endfor #%}-->
                                    <option value="CAN">Canada</option>
                                    <option value="CRI">Costa Rica</option>
                                    <option value="CUB">Cuba</option>
                                    <option value="MEX">Mexico</option>
                                    <option value="USA">United States</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="houseState">{{ 'form_state' | trans({}, "messages", lang) }} * :</label>
                                <input type="text" class="form-control" id="houseState" ng-model="newHouse.state">
                            </div>

                            <div class="form-group">
                                <label for="houseCity">{{ 'form_city' | trans({}, "messages", lang) }} *:</label>
                                <input type="text" class="form-control" id="houseCity" ng-model="newHouse.city">
                            </div>

                            <div class="form-group">
                                <label for="houseAddress">{{ 'form_address' | trans({}, "messages", lang) }} *:</label>
                                <input type="text" class="form-control" id="houseAddress" ng-model="newHouse.address">
                            </div>

                            <div class="form-group">
                                <label for="houseZipCode">{{ 'form_zipcode' | trans({}, "messages", lang) }} *:</label>
                                <input type="text" class="form-control" id="houseZipCode" ng-model="newHouse.zipCode">
                            </div>
                            <div class="form-group">
                                <label for="subPlanId">Plan:</label>
                                <select name="plan" class="form-control" id="housePlanId" ng-model="newHouse.planId"
                                        ng-change="getPlanPrice()"
                                        ng-disabled="newHouse.country=='' || newHouse.country==undefined">
                                    {% for plan in plans %}
                                        <option value="{{ plan.planid }}">{{ plan.planname }}</option>
                                    {% endfor %}

                                </select>
                            </div>
                            <div class="form-group">
                                <label for="status">Monthly amount:</label>
                                <text>{[newHouse.amount]} {[newHouse.currency]}</text>
                            </div>

                        </div>


                        <div class="padding-payment" id="container-payment" ng-if="step==3">
                            <h4 class="text-bold text-center">{{ 'dash_payinfo' | trans({}, "messages", lang) }}</h4>
                            <h5 class="error-message text-bold text-center">{[paymentInfo.error]} </h5>


                            </br>

                            <div class="form-group">
                                <label for="subPlanId">Plan:</label>
                                <text>{[paymentInfo.planName]}</text>
                            </div>
                            <div class="form-group">
                                <label for="status">{{ 'dash_month_amount' | trans({}, "messages", lang) }}</label>
                                <text>{[paymentInfo.amount]}</text>
                            </div>
                            <div class="form-group">
                                <label for="type">{{ 'dash_type_c' | trans({}, "messages", lang) }}</label>
                                <text>{{ 'dash_credit_card' | trans({}, "messages", lang) }}</text>
                            </div>
                            <!--div class="col-xs-6 no-padding"-->
                            <div class="form-group">
                                <label for="fullname">{{ 'dash_name_card' | trans({}, "messages", lang) }}</label>
                                <input type="text" class="form-control" id="nameOnCard"
                                       ng-model="paymentInfo.nameOnCard">
                            </div>

                            <div class="form-group">
                                <label for="creditCard">{{ 'dash_card_type' | trans({}, "messages", lang) }}</label>
                                <select name="creditCard" id="cardType" class="form-control"
                                        ng-model="paymentInfo.cardType">
                                    <option value=""></option>
                                    <option value="Visa">Visa</option>
                                    <option value="MasterCard">Master Card</option>

                                </select>
                            </div>

                            <div class="form-group">
                                <div class="col-xs-6 no-padding">
                                    <label for="cardnumber">{{ 'dash_card_number' | trans({}, "messages", lang) }}
                                        &nbsp; </label><img src="{{ asset('images/card_mastercard.png') }}"><img
                                            src="{{ asset('images/card_visa.png') }}">
                                </div>


                                <div class="row margin-left">

                                    <div class="col-xs-7 no-padding">
                                        <input type="number" class="form-control" id="cardNumber" maxlength="16"
                                               ng-model="paymentInfo.cardNumber">
                                    </div>
                                    <div class="col-xs-1 no-padding"></div>

                                    <div class="col-xs-3 no-padding">

                                        <input type="text" class="form-control" id="cvv" maxlength="3" placeholder="CVV"
                                               ng-model="paymentInfo.cvv">
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label for="dateexpiration">{{ 'dash_expiration_date' | trans({}, "messages", lang) }}</label>

                                    <div class="row margin-left">

                                        <div class="col-xs-4 no-padding">
                                            <select name="dateexpirationmonth" id="expMonth" class="form-control"
                                                    ng-model="paymentInfo.expMonth">

                                                <option value="01">01</option>
                                                <option value="02">02</option>
                                                <option value="03">03</option>
                                                <option value="04">04</option>
                                                <option value="05">05</option>
                                                <option value="06">06</option>
                                                <option value="07">07</option>
                                                <option value="08">08</option>
                                                <option value="09">09</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                            </select>
                                        </div>
                                        <div class="col-xs-2 no-padding"></div>
                                        <div class="col-xs-5 no-padding">
                                            <select name="dateexpirationyear" id="expYear" class="form-control"
                                                    ng-model="paymentInfo.expYear">
                                                {% set dateSplit = today |split("-") %}
                                                {% set year = dateSplit[0] %}
                                                {% for yr in year..(year+10) %}
                                                    <option value="{{ yr |slice(2,2) }}">{{ yr }}</option>
                                                {% endfor %}

                                            </select>
                                        </div>

                                    </div>

                                </div>
                            </div>


                        </div>


                        <div class="modal-footer">
                            <button type="button" class="btn bg-yellow color-black" ng-if="step>1"
                                    ng-click="goToPreviousStep()">
                                <span class="glyphicon glyphicon-chevron-left"
                                      title=""></span>{{ 'dash_back' | trans({}, "messages", lang) }}
                            </button>

                            <button type="button" class="btn bg-yellow color-black" ng-if="step<3"
                                    ng-click="goToNextStep()">
                                {{ 'dash_next' | trans({}, "messages", lang) }}<span
                                        class="glyphicon glyphicon-chevron-right" title=""></span>
                            </button>

                            <button type="button" class="btn bg-blue color-white" name="btn-submit" ng-if="step==3"
                                    ng-click="addRecurringPayments()">
                                {{ 'dash_submit' | trans({}, "messages", lang) }}<span
                                        class="glyphicon glyphicon-ok-circle" title=""></span>
                            </button>
                        </div>

                        </form>
                    </div>

                </div>

            </div>
        </div>
    </div>




    <div class="pad">
    </div>
{% endblock %}